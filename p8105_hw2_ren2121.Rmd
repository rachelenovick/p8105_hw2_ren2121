---
title: "p8105_hw2_ren2121"
output: html_document
date: "2025-09-26"
---

Loading the tidyverse library.

```{r}
library(tidyverse)
library(readxl)
```

# Problem 1

Importing and cleaning the pols-month dataset:

```{r}

pols_month_df =
  read_csv("538_data/pols-month.csv", na = c("NA", ".", "")) |> 
  separate(mon, into = c("year", "month", "day")) |> 
   mutate(
    year = as.integer(year),
    month = as.integer(month),                 
    month = month.name[month],                  
    month = factor(month, levels = month.name),
    president = case_when(
      prez_dem == 1 ~ "dem",
      prez_dem == 0 ~ "gop")) |> 
  select(-prez_dem, -prez_gop, -day)

```

Importing and cleaning the snp dataset:

```{r}

snp_df =
  read_csv("538_data/snp.csv", na = c("NA", ".", "")) |> 
  separate(date, into = c("month", "day", "year")) |> 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    year = if_else(year >= 50, 1900 + year, 2000 + year),
    month = month.name[month],
    month = factor(month, levels = month.name)) |> 
  relocate(year, month) |> 
  arrange(year, month)

```

Importing and cleaning the unemployment dataset:

```{r}

unemployment_df =
  read_csv("538_data/unemployment.csv", na = c("NA", ".", "")) |> 
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment") |> 
  mutate(
    year = as.integer(Year),                     
    month = month.name[match(month, month.abb)],
    month = factor(month, levels = month.name)) |>  
  select(-Year) |> 
  relocate(year)

```

Joining the datasets:

```{r}
snp_pols_df = 
  full_join(snp_df, pols_month_df, by = c("year", "month"))

full_df = 
  full_join(snp_pols_df, unemployment_df, by = c("year", "month")) |> 
  arrange(year, month)
```

**Description of the datasets**

The pols-month dataset has 822 observations and 9 variables (after cleaning), and provides information on the number of national politicians who are democratic or republican at any given time. It contains variables including: year, month, whether the president was republican or democrat, and the number of democratic and republic senators, governors, and representatives on those associated date.

The snp dataset has 787 observations and 4 variables (after cleaning), and provides information on the S&P. The variables included are: year, month, day, and close (the closing values of the S&P stock index on the associated date).

The unemployment dataset contains 68 observations and 3 variables (after cleaning), and provides information on the percentage of unemployment by date. The variables it includes are: year, month, and % unemployment associated with the month/year.

The resulting fully joined dataset has 828 observations and 12 variables: year, month, day, unemployment, president party, close, and the number of democratic and republican senators, governors, and representatives on the associated dates.

# Problem 2

Reading in and cleaning the Mr. Trash Wheel dataset:

```{r}

mr_trash = 
  read_excel("trash_data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N653") |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(sports_balls = as.integer(round(sports_balls)))

```

Reading in and cleaning the Professor Trash Wheel dataset:

```{r}

prof_trash = 
  read_excel("trash_data.xlsx", sheet = "Professor Trash Wheel", range = "A2:M120") |> 
  janitor::clean_names()

```







